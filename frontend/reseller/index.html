<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ | Ú¯Ø§Ø±Ø¯ÛŒÙ†Ùˆ Ù¾Ø±Ùˆ</title>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" />
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/components.css">
</head>
<body>

<nav class="navbar">
    <a href="index.html" class="nav-brand">GUARDINO</a>
    <div class="hamburger" onclick="toggleMenu()">â˜°</div>
    <div class="nav-menu" id="navMenu">
        <a href="index.html" style="color: var(--primary);">ğŸ  Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯</a>
        <a href="users.html">ğŸ‘¥ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</a>
        <a href="#" onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬</a>
    </div>
</nav>

<div class="container" style="padding-top: 30px;">
    <div class="card" style="background: linear-gradient(135deg, var(--primary), #8b5cf6); color: white; border: none;">
        <h2 style="margin-top: 0;">Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯! ğŸš€</h2>
        <p>Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø´Ù…Ø§:</p>
        <h1 id="walletBalance" style="margin: 10px 0; font-size: 2.5rem;">Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª...</h1>
    </div>

    <div class="action-container" style="text-align: center; margin-top: 40px;">
        <h2>Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø´ØªØ±Ø§Ú©â€ŒÙ‡Ø§</h2>
        <p>Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø§Ú©Ø§Ù†Øª Ø¬Ø¯ÛŒØ¯ ØªØ±Ú©ÛŒØ¨ÛŒ (Ù…Ø±Ø²Ø¨Ø§Ù† + Ù¾Ø§Ø³Ø§Ø±Ú¯Ø§Ø¯ + ÙˆØ§ÛŒØ±Ú¯Ø§Ø±Ø¯) Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø²ÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.</p>
        <div style="display: flex; justify-content: center; gap: 15px; margin-top: 20px;">
            <a href="users.html" class="btn-main" style="text-decoration: none;">â• Ø³Ø§Ø®Øª Ú©Ø§Ø±Ø¨Ø± Ø¬Ø¯ÛŒØ¯</a>
        </div>
    </div>
</div>

<script src="../assets/js/app.js"></script>
<script>
    // 1. Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯ÛŒÙ† Ø¨ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±
    const token = localStorage.getItem("guardino_token");
    if (!token) {
        window.location.href = "login.html";
    }

    // 2. Ù†Ù…Ø§ÛŒØ´ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ù…Ù†ÙˆÛŒ "Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†" (ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒÙ†Ø¯Ù‡ Ø§Ø±Ø´Ø¯)
    const userRole = localStorage.getItem("reseller_role");
    if (userRole === "master") {
        const navMenu = document.getElementById("navMenu");
        const subResellerLink = document.createElement("a");
        subResellerLink.href = "sub-resellers.html"; 
        subResellerLink.innerHTML = "ğŸ¢ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†";
        // Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù† Ø¯Ú©Ù…Ù‡ Ø¬Ø¯ÛŒØ¯ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ø² Ø¯Ú©Ù…Ù‡ Ø®Ø±ÙˆØ¬
        navMenu.insertBefore(subResellerLink, navMenu.lastElementChild);
    }

    // 3. Ù†Ù…Ø§ÛŒØ´ Ù…ÙˆØ¬ÙˆØ¯ÛŒ (Ø§Ø² Ø­Ø§ÙØ¸Ù‡ Ù„ÙˆÚ©Ø§Ù„ Ú©Ù‡ Ø¯Ø± Ø²Ù…Ø§Ù† Ù„Ø§Ú¯ÛŒÙ† Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù†ÛŒÙ…)
    const balance = localStorage.getItem("reseller_balance") || 0;
    document.getElementById("walletBalance").innerText = Number(balance).toLocaleString("fa-IR") + " ØªÙˆÙ…Ø§Ù†";

    // 4. ØªØ§Ø¨Ø¹ Ø®Ø±ÙˆØ¬
    function logout() {
        localStorage.clear();
        window.location.href = "login.html";
    }
</script>
</body>
</html>
